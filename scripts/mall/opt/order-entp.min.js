/*!
 * Powered by uglifiyJS v2.6.1, Build by http://jsmin.6tie.net
 * build time: Tue Jul 21 2020 21:11:56 GMT+0800 (China Standard Time)
*/
function dateFormatter(a,e,t){var n="<p>"+moment(e.end_date).format("YYYY-MM-DD HH:mm:ss")+"</p>";return"<p>"+moment(a).format("YYYY-MM-DD HH:mm:ss")+"</p>"+n}function siteMyFormatter(a,e,t){return"<p class='of120' title='"+a+"'><label class='label label-default' onclick='toView("+t+")'>\u590d\u5236</label>&nbsp;"+a+"</p><p class='of120'><a title='"+e.rel_addr+"' href='"+e.rel_addr+"' target='_blank'>"+e.rel_addr+"</a></p>"}function siteLinkFormatter(a,e,t){return"<p class='of120' title='"+a+"'>"+a+"</p><p class='of120'><a title='"+e.site_domain+"' href='"+e.site_domain+"' target='_blank'>"+e.site_domain+"</a></p>"}function orderStateFormatter(a,e,t){return 50==a?'<span class="label label-warning">'+orderStateObj[a]+"</span>":60==a?'<span class="label label-success">'+orderStateObj[a]+"</span>":70==a?'<span class="label label-info">'+orderStateObj[a]+"</span>":'<span class="label label-default">- '+orderStateObj[a]+"</span>"}function optFormatter(a,e,t){var n='<div class="hidden-sm hidden-xs btn-group">';return 50==e.order_state&&(n+='<button type="button" class="btn btn-success btn-xs" data-toggle="modal" onclick="checkLink(\''+t+'\')"><i class="ace-icon fa fa-link"></i> \u4e0a\u94fe</button>'),-20==e.order_state&&(n+='<button type="button" class="btn btn-danger btn-xs" data-toggle="modal" onclick="checkLinkError(\''+t+'\')"><i class="ace-icon fa fa-bug"></i> \u6545\u969c</button>'),n+='<button type="button" class="btn btn-default btn-xs" data-toggle="modal" onclick="toView(\''+t+'\')"><i class="ace-icon fa fa-copy"></i> \u590d\u5236</button>',n+="</div>",n+='<div class="hidden-md hidden-lg"> <div class="inline pos-rel"> <button class="btn btn-sm btn-primary dropdown-toggle" data-toggle="dropdown" data-position="auto"> <i class="ace-icon fa fa-cog icon-only bigger-110"></i> </button> <ul class="dropdown-menu dropdown-only-icon dropdown-yellow dropdown-menu-right dropdown-caret dropdown-close">',50==e.order_state&&(n+='<li> <a href="#" onclick="toEdit(\''+t+'\')" class="tooltip-info" data-rel="tooltip"> <span class="blue"> <i class="ace-icon fa fa-link"></i> \u4e0a\u94fe</span> </a> </li>'),-20==e.order_state&&(n+='<li> <a href="#" onclick="toDelete(\''+e.id+'\')" class="tooltip-info" data-rel="tooltip"> <span class="blue"> <i class="ace-icon fa fa-bug"></i> \u6545\u969c</span> </a> </li>'),n+='<li> <a href="#" onclick="toView(\''+t+'\')" class="tooltip-info" data-rel="tooltip"> <span class="blue"> <i class="ace-icon fa fa-copy"></i> \u590d\u5236</span> </a> </li>',n+="</ul></div></div>"}function toView(a){var e=$table.bootstrapTable("getData",!1)[a];$("#rel_name").val(e.rel_name),$("#rel_addr").val(e.rel_addr),$("#view_modal").modal("show")}function checkLink(a){var e=$table.bootstrapTable("getData",!1)[a];myConfirm(function(){ajax("?method=checkLink",{id:e.id,domainSource:e.site_domain,domainTarget:e.rel_addr,nameTarget:e.rel_name},"POST",saveHandle,!0,!0)},"\u786e\u8ba4\u5df2\u7ecf\u4e0a\u94fe\u4e86\u5417\uff1f","\u68c0\u67e5\u4e0a\u94fe")}function checkLinkError(a){var e=$table.bootstrapTable("getData",!1)[a];myConfirm(function(){ajax("?method=checkLink",{id:e.id,domainSource:e.site_domain,domainTarget:e.rel_addr,nameTarget:e.rel_name},"POST",saveHandle,!0,!0)},"\u786e\u8ba4\u6545\u969c\u5df2\u7ecf\u5904\u7406\uff1f","\u68c0\u67e5\u6545\u969c")}function saveHandle(a){1==a.code&&$table.bootstrapTable("refresh")}var columns_table=[];columns_table.push({title:"\u6211\u7684\u7f51\u7ad9",field:"pd_name",align:"left",valign:"middle",formatter:"siteLinkFormatter"}),columns_table.push({title:"\u5f85\u4e0a\u94fe\u63a5",field:"rel_name",align:"left",valign:"middle",formatter:"siteMyFormatter"}),columns_table.push({"class":"hidden-480",title:"\u603b\u4ef7",field:"order_money",align:"center",valign:"middle",formatter:"numFormatter"}),columns_table.push({title:"\u8d2d\u4e70\u6708\u6570",field:"order_num",align:"center",valign:"middle","class":"hidden-480"}),columns_table.push({"class":"hidden-480",title:"\u65f6\u95f4",field:"add_date",align:"center",valign:"middle",sortable:"true",formatter:"dateFormatter"}),columns_table.push({title:"\u72b6\u6001",field:"order_state",align:"center",valign:"middle",formatter:"orderStateFormatter"}),columns_table.push({title:"\u64cd\u4f5c",align:"center",valign:"middle",formatter:"optFormatter"});var $table,orderStateObj={};$(function(){$("#order-entp-left").addClass("active"),$table=initTable(columns_table,"?method=listAjax"),$("#begin_date").datetimepicker({locale:"zh-cn",format:"YYYY-MM-DD"}),$("#end_date").datetimepicker({locale:"zh-cn",format:"YYYY-MM-DD",useCurrent:!1}),$("#begin_date").on("dp.change",function(a){$("#end_date").data("DateTimePicker").minDate(a.date)}),$("#end_date").on("dp.change",function(a){$("#begin_date").data("DateTimePicker").maxDate(a.date)}),$("#order_state option").each(function(){""!=$(this).val()&&(orderStateObj[$(this).val()]=$(this).text())});var a=new ClipboardJS(".copy");a.on("success",function(a){popTip("\u590d\u5236\u6210\u529f:"+a.text)}),a.on("error",function(a){popTip("\u590d\u5236\u5931\u8d25:"+a)})});