/*!
 * Powered by uglifiyJS v2.6.1, Build by http://jsmin.6tie.net
 * build time: Tue Jul 21 2020 22:36:14 GMT+0800 (China Standard Time)
*/
function submitForm(e){vform.form()&&ajax("?method=save","validation-form","POST",saveHandle,!0,!0)}function getBaseClass(){var e=[];return $("#cls_id option").each(function(){e.push({value:$(this).val(),name:$(this).text()})}),e}function getSiteAllow(){var e=[];return $("#is_spec_price option").each(function(){e.push({value:$(this).val(),name:$(this).text()})}),e}function getStatus(){var e=[];return $("#is_sell option").each(function(){e.push({value:$(this).val(),name:$(this).text()})}),e}function operateFormatter(e,t,a){var l='<div class="hidden-sm hidden-xs btn-group">';return l+='<button type="button" class="btn btn-success btn-xs" data-toggle="modal" onclick="toEdit(\''+a+'\')"><i class="ace-icon fa fa-pencil"></i>&nbsp;\u4fee\u6539</button>&nbsp;&nbsp;',l+='<button type="button" class="btn btn-warning btn-xs" data-toggle="modal" onclick="toUpdate(\''+t.id+'\')"><i class="ace-icon fa fa-refresh"></i>&nbsp;\u5237\u65b0</button>&nbsp;&nbsp;',l+='<button type="button" class="btn btn-danger btn-xs" data-toggle="modal" onclick="toDelete(\''+t.id+'\')"><i class="ace-icon fa fa-trash-o"></i>&nbsp;\u5220\u9664</button>&nbsp;&nbsp;',l+="</div>",l+='<div class="hidden-md hidden-lg"> <div class="inline pos-rel"> <button class="btn btn-sm btn-primary dropdown-toggle" data-toggle="dropdown" data-position="auto"> <i class="ace-icon fa fa-cog icon-only bigger-110"></i> </button> <ul class="dropdown-menu dropdown-only-icon dropdown-yellow dropdown-menu-right dropdown-caret dropdown-close">',l+='<li> <a href="#" onclick="toEdit(\''+a+'\')" class="tooltip-info" data-rel="tooltip"> <span class="blue"> <i class="ace-icon fa fa-pencil"></i> \u4fee\u6539</span> </a> </li>',l+='<li> <a href="#" onclick="toUpdate(\''+t.id+'\')" class="tooltip-info" data-rel="tooltip"> <span class="blue"> <i class="ace-icon fa fa-refresh"></i> \u5237\u65b0</span> </a> </li>',l+='<li> <a href="#" onclick="toDelete(\''+t.id+'\')" class="tooltip-info" data-rel="tooltip"> <span class="blue"> <i class="ace-icon fa fa-trash-o"></i> \u5220\u9664</span> </a> </li>',l+="</ul></div></div>"}function dateFormatter(e,t,a){return moment(e).format("YYYY-MM-DD")}function siteDomainFormatter(e,t,a){return"<a href='/website/"+t.id+".html' target='_blank'>"+e+"</a>"}function siteRankFormatter(e,t,a){var l="<img src='https://cdn.jsdelivr.net/gh/aiservice/cms@latest/images/baiduapp/"+t.site_rank+".png'>",i="\u767e\u5ea6\u6536\u5f55\uff1a"+t.site_in_num;return'<span data-toggle="tooltip" data-placement="top" data-html="true" title="'+i+'">'+l+"</span>"}function statusFormatter(e,t,a){return 1==e?'<span class="label label-success">\u5df2\u4e0a\u67b6</span>':'<span class="label label-warning">\u672a\u4e0a\u67b6</span>'}function toAdd(){$.each(columns_table,function(e,t){t.value="",t.readonly=!1,("is_spec_price"==t.field||"is_sell"==t.field)&&(t.value="1")}),$("#p_date_tip").empty(),buildForm("container_data",columns_table),$("#add_modal").modal({backdrop:!0,keyboard:!0,show:!0})}function toEdit(e){var t=$table.bootstrapTable("getData",!1)[e];$.each(columns_table,function(e,a){a.shown&&"undefined"!=typeof a.field&&(a.value=t[a.field],"is_spec_price"==a.field&&(a.readonly=!0))}),buildForm("container_data",columns_table),$("#p_date_tip").html("\u6700\u8fd1\u4e00\u6b21\u4fee\u6539\u65f6\u95f4:"+moment(t.audit_date).format("YYYY-MM-DD")),$("#add_modal").modal("show")}function toDelete(e){myConfirm(function(){ajax("?method=delete",{id:e},"POST",saveHandle,!0,!0)},"\u786e\u5b9a\u8981\u5220\u9664\u6b64\u7f51\u7ad9\u5417\uff1f","\u5220\u9664")}function toUpdate(e){myConfirm(function(){ajax("?method=updateSiteSeoInfo",{id:e},"POST",saveHandle,!0,!0)},"\u786e\u5b9a\u8981\u5237\u65b0\u7f51\u7ad9\u6743\u91cd\u4fe1\u606f\u5417\uff1f","\u5237\u65b0")}function DeleteAll(){var e=getIdSelections($table);e&&e.length>0?myConfirm(function(){ajax("?method=delete",{ids:e.join(",")},"POST",saveHandle,!0,!0)},"\u786e\u5b9a\u8981\u5220\u9664\u9009\u4e2d\u7684\u7f51\u7ad9\u5417\uff1f","\u5220\u9664"):popTip("\u8bf7\u5148\u9009\u62e9\u8981\u5220\u9664\u7684\u9009\u9879")}function saveHandle(e){1==e.code&&($("#add_modal").modal("hide"),$("#delete_modal").modal("hide"),$table.bootstrapTable("refresh"))}function siteAllowFormatter(e,t,a){return 1==e?'<span class="label label-success">\u5141\u8bb8</span>':'<span class="label label-danger">\u4e0d\u5141\u8bb8</span>'}var columns_table=[];columns_table.push({field:"state",checkbox:!0,align:"center",valign:"middle"}),columns_table.push({title:"ID",field:"id",visible:!1,shown:!0,type:"input",child_type:"hidden"}),columns_table.push({title:"\u7f51\u7ad9\u540d\u79f0",field:"pd_name",align:"center",valign:"middle",shown:!0,type:"input",child_type:"text",required:!0,maxlength:128}),columns_table.push({title:"\u7f51\u7ad9\u57df\u540d",field:"site_domain",align:"left",valign:"middle",sortable:"true",formatter:"siteDomainFormatter",shown:!0,type:"input",child_type:"text",required:!0,maxlength:128}),columns_table.push({title:"\u7f51\u7ad9\u7c7b\u522b",field:"cls_name",align:"center",valign:"middle","class":"hidden-480"}),columns_table.push({title:"\u767e\u5ea6\u6743\u91cd",field:"site_rank",align:"center",valign:"middle","class":"hidden-480",formatter:"siteRankFormatter"}),columns_table.push({title:"\u7f51\u7ad9\u7c7b\u522b",field:"cls_id",visible:!1,"class":"hidden-480",shown:!0,type:"select",option:getBaseClass(),required:!0}),columns_table.push({title:"\u654f\u611f\u8bcd",field:"is_spec_price",align:"center","class":"hidden-480",shown:!0,type:"select",option:getSiteAllow(),required:!0,formatter:"siteAllowFormatter"}),columns_table.push({title:"\u53cb\u94fe\u4ef7\u683c",field:"price_ref",align:"center","class":"hidden-480",shown:!0,type:"input",child_type:"text",required:!0,maxlength:4}),columns_table.push({title:"\u9500\u91cf",field:"sales",align:"center","class":"hidden-480"}),columns_table.push({title:"\u6dfb\u52a0\u65f6\u95f4",field:"add_date",align:"center",valign:"middle","class":"hidden-480",sortable:"true",formatter:"dateFormatter"}),columns_table.push({title:"\u7f51\u7ad9\u72b6\u6001",field:"is_sell",align:"center",valign:"middle",formatter:"statusFormatter","class":"hidden-480",shown:!0,type:"select",option:getStatus(),required:!0}),columns_table.push({title:"\u64cd\u4f5c",align:"center","class":"action1",formatter:"operateFormatter"});var vform,$table;$(function(){$("#website-left").addClass("active"),$table=initTable(columns_table,"?method=listAjax"),$table.on("load-success.bs.table",function(e,t){$('[data-toggle="tooltip"]').tooltip()}),vform=$("#validation-form").validate({errorElement:"div",errorClass:"help-block",focusInvalid:!1,ignore:"",rules:{pd_name:{required:!0},site_domain:{required:!0,url:!0},price_ref:{required:!0,digits:!0},cls_id:{required:!0},is_spec_price:{required:!0},is_sell:{required:!0}},messages:{email:{required:"\u8bf7\u586b\u5199\u7f51\u7ad9\u540d\u79f0"},site_domain:{required:"\u8bf7\u586b\u5199\u7f51\u7ad9\u57df\u540d",url:"\u8bf7\u6b63\u786e\u586b\u5199\u57df\u540d,\u9700\u5305\u542bhttp\u6216\u8005https"},price_ref:{required:"\u8bf7\u586b\u5199\u53cb\u94fe\u4ef7\u683c",digits:"\u8bf7\u6b63\u786e\u586b\u5199\u4ef7\u683c"},cls_id:{required:"\u8bf7\u9009\u62e9\u7f51\u7ad9\u7c7b\u522b"},is_spec_price:{required:"\u8bf7\u9009\u62e9\u662f\u5426\u5141\u8bb8\u654f\u611f\u8bcd"},is_sell:{required:"\u8bf7\u9009\u62e9\u662f\u5426\u4e0a\u67b6"}},highlight:function(e){$(e).closest(".form-group").removeClass("has-info").addClass("has-error")},success:function(e){$(e).closest(".form-group").removeClass("has-error"),$(e).remove()}})});